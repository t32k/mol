<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOL &mdash; Designing for a Mobile World!</title>
    <link href="http://fonts.googleapis.com/css?family=Droid+Sans:400,700" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/mol/assets/main.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="/images/logo.png"/>
    <link href="/feed.xml" rel="alternate" type="application/rss+xml" title="MOL" />
    <meta name="title" content="MOL">
    <link rel="canonical" href="http://t32k.me//page7/index.html">
     
           
    <meta property="og:title" content="MOL"/>
    <meta property="og:url" content="http://t32k.me//page7/index.html"/>
    
    
    <meta property="og:site_name" content="MOL">     
</head>
<body>
    
<section class="site-nav">
    <header>
        <nav id="navigation">
            <a class="brand" href="/mol/">
                <img src="/mol/images/logo.png" alt="Inc">
            </a>
            <a href="/mol/" class="home">Blog</a>
            <a href="https://github.com/t32k/maple">Maple</a>
            <a href="https://github.com/t32k/t32k.github.io/blob/master/README.md">About</a>
        </nav>
    </header>
</section>

<div class="blog-cover" style="background-image:url(/mol/images/blog-cover.jpg);">
    
    <section>
        <div class="container">
            <h1>MOL</h1>
            <h3>Designing for a Mobile World!</h3>
        
            
            <a href="https://twitter.com/t32k" title="Follow on Twitter" target="_blank"><i class="icon icon-twitter"></i></a>
            
            
            <a href="https://github.com/t32k" title="Follow on GitHub" target="_blank"><i class="icon icon-facebook"></i></a>
            
            <a href="/feed.xml" title="RSS Feed">
                <i class="icon icon-rss"></i>
            </a>
        </div>
    </section>
</div>


<article class="container">

  
    <section class="index">
        <!-- -->
        <div>
            <h2 class="title"><a href="/mol/log/present-for-you/" rel="prefetch">Sublime Text 2 のアイコンをなんとかする</a></h2>
            <p><p><strong><a href="http://www.adventar.org/calendars/20">Sublime Text 2 Advent Calendar 2012 </a></strong>
<blockquote>とりあえず作ってみました！
Sublime Text 2に関することであれば何でもOKです。</blockquote>
ということで、Advent Calendarでは与えられたテーマから外れた内容で記事を書くことに定評のある<a href="https://twitter.com/t32k">@t32k</a>がラストを飾ってやんよ(o°3°b)b</p>

<p>私、恥ずかしながらSublime Textのプラグインを作ろうと思ってもPythonもかけない最下級サブライムテキスター<span style="color: #888888;">(戦闘力・たったの５か・・ゴミめ・・・)</span>でして、そんな僕でもいつかはPythonとかRubyとかSublime Textで書きたいと思うわけです。そこで今はその悔しい気持ちをアイコンにぶつけるわけです。
<p style="text-align: center;"><img class="aligncenter size-full wp-image-4619" src="http://t32k.me/mol/file/2012/12/st2.jpg" alt="st2" width="900" height="300" /></p>
ST2のアイコンですけど、まぁそんなに、いまいち、いわんや、それほど、ましてや、はたまた、それでいて、かっこよろしくないわけですね。なんだろう色かなぁ、角度？形状？S?</p>

<p>そんなわけで、こう思っているのは万国共通なのか「<a href="https://www.google.co.jp/search?hl=ja&amp;safe=off&amp;tbo=d&amp;q=sublime+text+icon+replacement&amp;oq=sublime+text+icon&amp;gs_l=serp.3.2.0j0i30l4j0i8i30l3j0i5i30l2.2066.2066.0.3949.1.1.0.0.0.0.123.123.0j1.1.0...0.0...1c.1.2aW1JbqCr-s">sublime text icon replacement</a>」なんかでググりますと、いろいろ出てきます。
<ul>
    <li><a href="http://blog.jerodsanto.net/2012/01/sublime-text-2-icon-replacement-roundup/">Sublime Text 2 Icon Replacement Roundup - Jerod Santo</a></li>
</ul>
世界中のデザイナーが作品を投稿するSNSサイト「Dribbble」でも検索してみるといろいろ出てきます。
<ul>
    <li><a href="http://dribbble.com/search?q=sublime+text"><strong>Dribbble - Show and tell for designers </strong></a></li>
</ul>
既存のアイコンをブラッシュアップしたもの、「S」をモチーフにしたもの、「Lime」をモチーフにしたもの、やたらシンプルなもの、いろいろです。ここで自分のお気に入りのアイコン、DLできるアイコンが見つかれば問題ないのですが、これじゃ満足できないなんでも欲しがる子はやっぱり自分で作るしか無いわけです。
<h2>The Icon</h2>
自分でSublime Textアイコンを作る前に、アイコンの予習をば。</p>

<p><a href="http://t32k.me/mol/file/2012/12/insta1.jpg"><img class="aligncenter size-full wp-image-4632" title="insta" src="http://t32k.me/mol/file/2012/12/insta1.jpg" alt="" width="900" height="300" /></a></p>

<p>なにごとも、最初からオリジナルなものを作るのは難しいです。プログラミングでもそうでしょ？最初は良いコードを写経するもんでしょ？なので、僕も勉強がてらinstagramのアイコンとか写経してみました。いろいろ詰めが甘いですが、光の付け方とかこーすればそれっぽく見えるんだなとか一回やってみるといろいろ勉強になります。
<ul>
    <li><a href=" http://iosicongallery.com/">iOS Icon Gallery | iOS Icon Design Gallery</a></li>
    <li><a href="http://app-icons.net/">APP icons </a></li>
</ul>
上記のサイトとか見てると綺麗なアイコンがいっぱいでテンションあがります。ただ、こういったところにあがっているものを最初から作れるわけないので（<a href="http://dribbble.com/shots/200993-Boxing-Glove-App-icon">こうゆうのとか</a>どっから手を付けたらよいかわかりません＞＜）、部分的にパクるとか、Psdtuts+などでは比較的簡単な、よく使われる表現のチュートリアルがあるので、そういったものをやってみて表現できるボキャブラリーを増やしていけばよいと思います。
<ul>
    <li>
<p style="display: inline !important;"><a href="http://psd.tutsplus.com/tutorials/icon-design/mobile-app-icon/">Create a Mobile App Icon in Photoshop | Psdtuts+</a></p>
</li>
    <li><a href="http://psd.tutsplus.com/tutorials/icon-design/create-a-camera-lens-icon-in-photoshop-screencast/">Create a Camera Lens Icon in Photoshop – Screencast | Psdtuts+</a></li>
</ul>
<h2>Sublime Text Icon</h2>
<ul>
    <li><a href="https://github.com/dmatarazzo/Sublime-Text-2-Icon"><strong>dmatarazzo/Sublime-Text-2-Icon · GitHub </strong></a></li>
</ul>
さて、Sublime Textのアイコンを作っていきますか。幸いにもひな形というか、Sublime Textで必要となるフォーマットは上記のGitHubからフォークすることできます。なるほどデザインデータもGitHubで管理する時代ですかなるほど(・ω&lt;) ご丁寧にもPSDデータまであるので、見てみますと512pxサイズで作っておけばあと問題ない感じですかね。</p>

<p>個人的にはテキストエディタのアイコンなので、テキストブック...ブック....本( ・∀・)!!みたいなアイコンにしたいと思いました。</p>

<p><a href="https://github.com/t32k/Sublime-Text-2-Icon"><img class="aligncenter size-full wp-image-4622" src="http://t32k.me/mol/file/2012/12/icon1.jpg" alt="icon1" width="900" height="300" /></a>
<ul>
    <li><a href="https://github.com/t32k/Sublime-Text-2-Icon">https://github.com/t32k/Sublime-Text-2-Icon</a></li>
</ul>
最初に作ったのこれ。縫い目の表現をしたかったので個人的に満足したのですけれどもロゴマーク的（S）なものがしっくりきてないのと、iOSアイコンのテンプレートで作ってるのMac Appアイコンとして見てると少し平べったい印象です。</p>

<p>なんかもうちょっとモッコリしてみたいなと思ったのと、本の「地」みせた感じのあの表現やってみたいなと思ってぐぐってみるてると、見つけました。
<p style="text-align: center;"><a href="http://dmonzon.com/freebies/book-icon-template/"><img class="aligncenter size-full wp-image-4630" title="book" src="http://t32k.me/mol/file/2012/12/book.jpg" alt="" width="900" height="300" /></a></p></p>

<ul>
    <li>
<p style="display: inline !important;"><a href="http://dmonzon.com/freebies/book-icon-template/ ">Book Icon Template</a></p>
</li>
</ul>

<p>おお！アレアレ！ということですが、これをそのまま使うのは芸がないので変えてみましょう。なんかいいのないかなと思ったら手元に<a href="http://www.moleskine.co.jp/">某有名なメモ帳</a>があったのでこれを真似てみましょう。</p>

<p>なんでこんなにテカってる本なのでしようね、テクスチャを落ち着いたレザーに変えたいものです。
<ul>
    <li>
<p style="display: inline !important;"><a href="http://subtlepatterns.com/">Subtle Patterns | Free textures for your next web project</a></p>
</li>
</ul>
ということで、いつもテクスチャ系でお世話になってるのが上記のサイトでSubtleというだけあって主張し過ぎない、ギラつかない、いい感じのテクスチャがいっぱいあります。</p>

<p><a href="https://github.com/t32k/Sublime-Text-2-Icon/tree/moreskine"><img class="aligncenter size-full wp-image-4623" src="http://t32k.me/mol/file/2012/12/icon2.jpg" alt="icon2" width="900" height="300" /></a>
<ul>
    <li>
<p style="display: inline !important;"><a href="https://github.com/t32k/Sublime-Text-2-Icon/tree/moreskine">https://github.com/t32k/Sublime-Text-2-Icon/tree/moreskine</a></p>
</li>
</ul>
で、ちょいちいといじりますとこんな感じに出来上がりました。</p>

<p>あとは、出来上がったPNG形式の画像を下記サイトでicoやicnsに出力します。
<ul>
    <li>
<p style="display: inline !important;"><a href="http://iconverticons.com/online/  ">iConvert: ico、icns、pngアイコンをオンラインでWindows用、Mac OS X用、Linux用へと変換する</a></p>
</li>
</ul>
いかがでしたでしょうか？デザインってのそんなに難しくないですよね？いや難しいか... いや僕も絵とか書けないんですけど、最近のプログラミングみたいに便利なオープンソースフレームワークを使ってちゃちゃっとWebアプリケーションを作るような感じで、アイコンとかも便利な素材やチュートリアルがたくさん出回っているので、うまく活用してお気に入りのアイコンを作ってみたらいいんじゃないかと思います。</p>
</p>
            <div class="meta">
                Written By <address></a> &mdash;
                <time pubdate datetime="2012-25-December" title="December 25, 2012">December 25, 2012</time>
            </div>
        </div>
        <hr>
    </section>
    
    
  
    <section class="index">
        <!-- -->
        <div>
            <h2 class="title"><a href="/mol/log/backbone-lodash-ender/" rel="prefetch">Backbone +  Lo-Dash + Ender?</a></h2>
            <p><p><strong><a href="http://www.adventar.org/calendars/15">Backbone.js Advent Calendar 2012</a></strong>
<blockquote>Backbone.jsのTIPSとかパターンとか、他のライブラリとの連携などなど。
フルスタック感がない分、各自でいろいろ編み出しながら使いこなしていると思うので、そのあたりの共有がてら書きましょう！</blockquote>
ということで、Advent Calendarでは与えられたテーマから外れた内容で記事を書くことに定評のある<a href="https://twitter.com/t32k">@t32k</a>が23日目をお贈りしてやんよ(o°3°b)b</p>

<p>私、恥ずかしながらBackbone.jsとは今のところ無縁な最下級HTMLコーダー(戦闘力・たったの５か・・ゴミめ・・・)でして、そんあ僕でもいつかはAPIとか使って情報とってきて面白いWebアプリケーション作りたいと思うわけです。そこでBackbone.jsなわけです。</p>

<p>そんなわけでわけの分からぬまま<a href="http://backbonejs.org/">Backbone.jsの公式サイト</a>を読んでみると
<blockquote>Backbone&#39;s only hard dependency is either <a href="http://underscorejs.org/">Underscore.js</a> <small>( &gt; 1.4.3)</small> or <a href="http://lodash.com/">Lo-Dash</a>. For RESTful persistence, history support via <a href="http://backbonejs.org/#Router">Backbone.Router</a> and DOM manipulation with<a href="http://backbonejs.org/#View">Backbone.View</a>, include <a href="https://github.com/douglascrockford/JSON-js">json2.js</a>, and either <a href="http://jquery.com/">jQuery</a> <small>( &gt; 1.4.2)</small> or <a href="http://zeptojs.com/">Zepto</a>.</blockquote>
とかいてあり、とりあえず、Backbone.jsを使うには、Underscore / Lo-Dashと、jQuery / Zeptoが必要みたい。Lo-Dashについては、<a href="http://havelog.ayumusato.com/develop/javascript/e531-backbone_webapp_case_intro.html">1日目の@ahomuさん</a>もちょっと触れてるね。
<pre><code class="javascript">// For Backbone&#39;s purposes, jQuery, Zepto, or Ender owns the <code>$</code> variable.
Backbone.$ = root.jQuery || root.Zepto || root.ender;</code></pre>
ソースコードの方を読んでみると、jQuery / Zepto以外にもEnderってのも使っていいらしい。なんぞこれ初耳よ！どれ使ったらいいのよ！</p>

<p>ということでBackboneはおいといて、この記事は形から入る男@t32kが Underscore / Lo-Dash と Zepto / Ender について調べてみるよ！
<h2>Underscore / Lo-Dash</h2>
<ul>
    <li><a href="http://underscorejs.org/">Underscore.js</a> (v1.4.3)</li>
    <li><a href="http://lodash.com/">Lo-Dash</a> (v1.0.0-rc.3)</li>
</ul>
Underscoreに関しては、Backboneと同じDocumentCloudが管理してるので、Backbone使うんならUnderscoreというように1セットのように考えている人も多いように思います。実際、@ahomuさんが使ってなかったら僕も知らなかったす。</p>

<p>そもそも、Lo-Dashのなぜ必要なのか、Underscoreと全く同じであるのであれば存在する必要性はないのですが、<a href="https://github.com/bestiejs/lodash">README</a>を読んでみるとUnderscoreに勝る利点がいくつか書いてあります。
<h3>consistency</h3>
<ul>
    <li>Allow iteration of objects with a <code>length</code> property [<a href="https://github.com/documentcloud/underscore/pull/799">#799</a>, <a href="https://github.com/bestiejs/lodash/blob/v1.0.0-rc.3/test/test.js#L605-L611">test</a>]</li>
    <li>Fix cross-browser object iteration bugs [<a href="https://github.com/documentcloud/underscore/issues/60">#60</a>, <a href="https://github.com/documentcloud/underscore/issues/376">#376</a>, <a href="https://github.com/bestiejs/lodash/blob/v1.0.0-rc.3/test/test.js#L618-L642">test</a>]</li>
    <li>Methods should work on pages with incorrectly shimmed native methods [<a href="https://github.com/documentcloud/underscore/issues/7">#7</a>, <a href="https://github.com/documentcloud/underscore/issues/742">#742</a>, <a href="https://github.com/bestiejs/lodash/blob/v1.0.0-rc.3/test/test.js#L140-L146">test</a>]</li>
    <li><code><em>.isEmpty</code> should support jQuery/MooTools DOM query collections [<a href="https://github.com/documentcloud/underscore/pull/690">#690</a>, <a href="https://github.com/bestiejs/lodash/blob/v1.0.0-rc.3/test/test.js#L807-L812">test</a>]</li>
    <li><code></em>.isObject</code> should avoid V8 bug <a href="http://code.google.com/p/v8/issues/detail?id=2291">#2291</a> [<a href="https://github.com/documentcloud/underscore/issues/605">#605</a>, <a href="https://github.com/bestiejs/lodash/blob/v1.0.0-rc.3/test/test.js#L888-L900">test</a>]</li>
    <li><code><em>.keys</code> should work with <code>arguments</code> objects cross-browser [<a href="https://github.com/documentcloud/underscore/issues/396">#396</a>, <a href="https://github.com/bestiejs/lodash/blob/v1.0.0-rc.3/test/test.js#L982-L984">test</a>]</li>
    <li><code></em>.range</code> should coerce arguments to numbers [<a href="https://github.com/documentcloud/underscore/issues/634">#634</a>, <a href="https://github.com/documentcloud/underscore/issues/683">#683</a>, <a href="https://github.com/bestiejs/lodash/blob/v1.0.0-rc.3/test/test.js#L1383-L1386">test</a>]</li>
</ul>
なんかいろいろ解決されているらしい。
<h3>customization</h3>
<ul>
    <li>lodash bacbone</li>
    <li>lodash csp</li>
    <li>lodash legacy</li>
    <li>lodash mobile</li>
    <li>lodash strict</li>
    <li>loadh underscore</li>
</ul>
<a href="https://github.com/bestiejs/lodash#custom-builds">なんかいろいろカスタムビルド</a>出来るらしい。
<h3>performance</h3>
<p style="text-align: center;"><img class="fig aligncenter" alt="" src="http://t32k.me/mol/file/2012/12/bench.png" width="600" height="386" /></p>
<a href="http://lodash.com/benchmarks">
<ul>
    <li><strong>ベンチマークテスト</strong></li>
</ul>
</a></p>

<p>だいたい速いらしい(77/89でlodashが速かった。全部テストしてない)
<h4>extra features</h4>
<ul>
    <li>AMD loader support (<a href="http://requirejs.org/">RequireJS</a>, <a href="https://github.com/cujojs/curl">curl.js</a>, etc.)</li>
    <li><a href="http://lodash.com/docs#_"><code><em>(…)</code></a> supports intuitive chaining</li>
    <li><a href="http://lodash.com/docs#bindKey"><code></em>.bindKey</code></a> for binding <a href="http://michaux.ca/articles/lazy-function-definition-pattern"><em>“lazy”</em> defined</a> methods</li>
    <li><a href="http://lodash.com/docs#cloneDeep"><code><em>.cloneDeep</code></a> for <em>“deep”</em> cloning arrays and objects</li>
    <li><a href="http://lodash.com/docs#contains"><code></em>.contains</code></a> accepts a <code>fromIndex</code> argument</li>
    <li><a href="http://lodash.com/docs#forEach"><code><em>.forEach</code></a> is chainable and supports exiting iteration early</li>
    <li><a href="http://lodash.com/docs#forIn"><code></em>.forIn</code></a> for iterating over an object’s own and inherited properties</li>
    <li><a href="http://lodash.com/docs#forOwn"><code><em>.forOwn</code></a> for iterating over an object’s own properties</li>
    <li><a href="http://lodash.com/docs#isPlainObject"><code></em>.isPlainObject</code></a> checks if values are created by the <code>Object</code> constructor</li>
    <li><a href="http://lodash.com/docs#merge"><code><em>.merge</code></a> for a <em>“deep”</em> <a href="http://lodash.com/docs#extend"><code></em>.extend</code></a></li>
    <li><a href="http://lodash.com/docs#partial"><code><em>.partial</code></a> for partial application without <code>this</code> binding</li>
    <li><a href="http://lodash.com/docs#pick"><code></em>.pick</code></a> and <a href="http://lodash.com/docs#omit"><code><em>.omit</code></a> accept <code>callback</code> and <code>thisArg</code> arguments</li>
    <li><a href="http://lodash.com/docs#template"><code></em>.template</code></a> supports <a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-7.8.6">ES6 template delimiters</a> and utilizes <a href="http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl">sourceURLs</a> for easier debugging</li>
    <li><a href="http://lodash.com/docs#contains"><code><em>.contains</code></a>, <a href="http://lodash.com/docs#size"><code></em>.size</code></a>, <a href="http://lodash.com/docs#toArray"><code><em>.toArray</code></a>, &lt;a title=&quot;</em>.countBy, _.every, _.filter, _.find, _.forEach, _.groupBy, _.invoke, _.map, _.max, _.min, _.pluck, _.reduce, _.reduceRight, _.reject, _.shuffle, _.some, _.sortBy, _.where&quot; href=&quot;http://lodash.com/docs&quot;&gt;and more…</a> accept strings</li>
</ul>
わーい、いっぱいーヽ(=´▽`=)ﾉ</p>

<p>というわけ、Underscoreも改善されてくると思うけど、今んところLo-Dashを使ったほうが良さげな感じ。
<h2>Zepto / Ender</h2>
<ul>
    <li><a href="http://zeptojs.com/">Zepto.js: the aerogel-weight jQuery-compatible JavaScript library </a> (v1.0rc1)</li>
    <li><a href="http://ender.jit.su/">Ender - the no-library JavaScript library </a></li>
</ul>
だんだんめんどくさくなってきたので、
<p style="display: inline !important;"><a href="http://www.whatsmyip.org/http-compression-test/">WhatsMyIP.org | HTTP Compression Test </a>で各ファイルサイズ（Gzip後のサイズ）だけ比べてみる。</p>
■ <a href="http://zeptojs.com/zepto.min.js"><strong>http://zeptojs.com/zepto.min.js</strong></a>
<blockquote>Original Size: 23.45 KB
Compressed Size: 9.22 KB</blockquote>
■ <a href="http://cdn.enderjs.com/jeesh.min.js"><strong>http://cdn.enderjs.com/jeesh.min.js</strong></a>
<blockquote>Actual Page Size: 30.68 KB
Size if Compressed: 11.23 KB</blockquote>
■ <a href="http://code.jquery.com/jquery-1.8.3.min.js"><strong>http://code.jquery.com/jquery-1.8.3.min.js</strong></a>
<blockquote>Original Size: 91.44 KB
Compressed Size: 32.69 KB</blockquote>
Jeesh.min.jsってのはEnder.jsのスタータパックみたいなものでセレクタエンジン（<a href="https://github.com/ded/qwery">Qwery</a>）とか最小限が入ってる構成。こう見てみると、jQueryが重いのは当たり前として、EnderよりZeptoのほうが軽いんだね。</p>

<p>しかし、まぁ個々のメソッドの実行速度(<a href="http://jsperf.com/qwery-vs-jquery-vs-mootools-selector-engines/13)">jQuery vs Zepto.js vs Jeesh(Ender.js) selector engines · jsPerf)</a>を見てみないとなんとも言えないし、古いIEを切り捨てる<a href="http://blog.jquery.com/2012/06/28/jquery-core-version-1-9-and-beyond/">jQuery 2.0</a>がどれだけ軽くなるか気になるとこだけど、個人的にちょっとEnder.js調べてみたいかもと思ったかも ∈ ﾟ) ﾉ</p>

<h2></h2>

<p>とまぁなんやかんや調べてみましたけど、Backbone +  Lo-Dash + Enderって構成がナウいのかな。この辺りに関してはたぶん来年のFrontrend  Vol.4 powered by CyberAgentで詳しく話されるんじゃないかなと思ってる。興味持った人は参加してみてー。案内出てないけど。</p>
</p>
            <div class="meta">
                Written By <address></a> &mdash;
                <time pubdate datetime="2012-23-December" title="December 23, 2012">December 23, 2012</time>
            </div>
        </div>
        <hr>
    </section>
    
    
  
    <section class="index">
        <!-- -->
        <div>
            <h2 class="title"><a href="/mol/log/chrome-devtools-next/" rel="prefetch">Chrome DevTools.next from yoshikawa_t</a></h2>
            <p><p style="text-align: center;"><img class=" wp-image-4570 aligncenter" alt="" src="http://t32k.me/mol/file/2012/12/chrome.jpg" /></p>

<p>昨日は、弊社の社内勉強会に、Google API Expertや「<a href="http://www.amazon.co.jp/dp/484433266X">jQuery Mobileパーフェクトガイド</a>」の著者で有名な<a href="http://d.hatena.ne.jp/pikotea/">吉川さん</a>が登壇してくれました。『なんか喋ってよ』とアバウトな私の要望に完璧に、いやパーペキすぎに応えてくれました吉川さんにマジ感謝リスペクトでございます。</p>

<p>そんな吉川さんのスライドが上がっておりますので、みなさまもご覧になってはどうでしょうか。</p>

<iframe style="border: 1px solid #CCC; border-width: 1px 1px 0; margin-bottom: 5px;" src="http://www.slideshare.net/slideshow/embed_code/15725086" height="486" width="597" allowfullscreen="" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe>

<div style="margin-bottom: 5px;"><strong> <a title="Chrome DevTools.next" href="http://www.slideshare.net/yoshikawa_t/chrome-devtoolsnext" target="_blank">Chrome DevTools.next</a> </strong> from <strong><a href="http://www.slideshare.net/yoshikawa_t" target="_blank">yoshikawa_t</a></strong></div>

<p>以前にもこの社内勉強会では<a href="https://speakerdeck.com/t32k/mobile-front-end-optimization-standard-2012">私もChrome DevTools(PageSpeed)に関して</a>、ざっと概要を説明していたのですが、JavaScriptやレンダリングの最適化等に関しては説明していなかった（できなかった）ので、吉川さんにお願いしました。</p>

<p>やっぱりデモをしながらだとすごくわかりやすくて、特にTimelineパネルの説明などは英語などの記事はよく見かけるのですが、今回、日本語で説明してくれて本当助かりました。このへんちょっとよく分かんなかったので、テンションだだあがりでした。</p>

<p>もはやHTTPリクエスト削減などは当たり前にやるべきことで、競合他社とパフォーマンスに関して差別化しようと思うのであれば、このレベルでの最適化が必要になってくると感じているので、まさしくNextの段階に進むための素晴らしい講義でした。
<h3>参考</h3>
<ul>
    <li>
<p style="display: inline !important;"><a href="http://www.jankfree.com/jank-busters-io/index.html#1">Jank Busters - Google IO 2012</a></p>
</li>
    <li><a href="https://gist.github.com/4338551">gist:4338551</a></li>
    <li><a href="http://paulirish.com/2012/why-moving-elements-with-translate-is-better-than-posabs-topleft/">Why moving elements with translate() is better than pos:abs top/left « Paul Irish</a></li>
    <li><a href="http://www.youtube.com/watch?v=WpqZ0LjNU5A">The Breakpoint Ep. 4 —The Tour De Timeline - YouTube</a></li>
    <li><a href="http://addyosmani.com/blog/performance-optimisation-with-timeline-profiles/">Improving Web App Performance With the Chrome DevTools Timeline and Profiles </a></li>
    <li><a href="http://ariya.ofilabs.com/2012/12/javascript-performance-analysis-sampling-tracing-and-timing.html">JavaScript Performance Analysis: Sampling, Tracing, and Timing don&#39;t code today what you can&#39;t debug tomorrow </a></li>
    <li><a href="http://www.html5rocks.com/en/tutorials/speed/rendering/">Jank Busting for Better Rendering Performance - HTML5 Rocks</a></li>
    <li><a href="http://www.html5rocks.com/en/tutorials/games/abouttracing/">Profiling your WebGL Game with the about:tracing flag - HTML5 Rocks </a></li>
    <li><a href="https://docs.google.com/presentation/d/1b7rdeXYdmL3lmT24GAaC14eOSkq5qt6FM-yLSeFykQk/edit?pli=1#slide=id.g5087401_1_0">Velocity 2012 - Rendering Slow - Google Drive </a></li>
</ul>
あと、吉川さんはChromeのGoogle API Expertということで、DevToolsへの要望・改善を本国のエンジニアに伝えることが可能らしく、DevToolsの不満は吉川さんにぶつけてみようｗ僕からは、スマホサイトとPCサイトをデバッグしてるときすごくめんどくさいのですが、Dock to rightとDock to Bottomをワンクリック（ショートカット）で切り替え出来るようにしてほしい！と投げときました。</p>

<p>最後に、Paul Irishさんに(o・∀・)oｸﾞｯｼﾞｮﾌﾞ!って言われてる吉川さんすげー！！今回はほんとうにありがとうございました！
<blockquote class="twitter-tweet tw-align-center" data-in-reply-to="282104729696362497">@<a href="https://twitter.com/yoshikawa_t">yoshikawa_t</a> fantastic deck. nice work!</p>

<p>— Paul Irish (@paul<em>irish) &lt;a href=&quot;https://twitter.com/paul</em>irish/status/282214323294711808&quot; data-datetime=&quot;2012-12-21T20:01:52+00:00&quot;&gt;December 21, 2012</a></blockquote>
&nbsp;</p>
</p>
            <div class="meta">
                Written By <address></a> &mdash;
                <time pubdate datetime="2012-22-December" title="December 22, 2012">December 22, 2012</time>
            </div>
        </div>
        <hr>
    </section>
    
    
  
    <section class="index">
        <!-- -->
        <div>
            <h2 class="title"><a href="/mol/log/spriting-with-compass/" rel="prefetch">パフォーマンスからみるSass/Compass 第2回：CompassによるCSS Sprite</a></h2>
            <p><blockquote>Sass、Less、StylusなどCSS Preprocessorに関するAdvent Calendarです。
<a href="http://www.adventar.org/calendars/1">CSS Preprocessor Advent Calendar 2012 </a></blockquote>

<ul>
    <li>【1日目】<a href="http://webtech-walker.com/archive/2012/12/less_extend.html">最近のLessのextendの進捗 - Webtech Walker </a></li>
    <li>【3日目】<a href="http://tech.naver.jp/blog/?p=2268">compassのベンダープリフィックス制御 « NAVER Engineers' Blog </a></li>
</ul>

<p>パフォーマンスの勉強ができてなおかつSass/Compassのお勉強にもなるお得なシリーズまさかの2回目。Adventにぶつけてきた！ややもするとシリーズものの2作目というのは駄作になりがちだが、そんなプレッシャーはねのけて乱反射！やっていくYO! これまでの。
<ul>
    <li><a href=" http://t32k.me/mol/log/sass-nesting-and-import/">パフォーマンスからみるSass/Compass 第1回：Nestingと@import</a></li>
    <li><a href="http://t32k.me/mol/log/compass-ie-hex-str-function/">パフォーマンスからみるSass/Compass 番外編：MSは青かった</a></li>
</ul>
<div>&lt;!--more--&gt;</div>
<h2>CSS Spriteの利点・欠点</h2>
「<a href="http://www.amazon.co.jp/exec/obidos/ASIN/487311361X/warikiru-22/">ハイパフォーマンスWebサイト</a>」（オライリー・ジャパン）の書籍には「高速サイトを実現する14のルール」というものがある。その中でも最も効果のある対策として「HTTPリクエストを減らす」ことを挙げている。HTTPリクエストというのは画像やJavaScriptファイル、CSSファイル等をWebページで読み込む（サーバーにリクエストする）ことを言う。 このリクエストが多ければ多いほど、HTMLページの読み込み速度は遅くなってしまう。フロント（マークアップ）側でできる対策としてはポピュラーなものとしてCSSスプライトという手法があり、これは複数の画像をひとつにまとめ、背景画像としてbackground-positionを調整することで一つ一つの画像として表示する方法だ。</p>

<p>http://www.youtube.com/watch?v=s<strong>XwfwxMW8
<ul>
    <li>&lt;a href=&quot;http://www.youtube.com/watch?v=s</strong>XwfwxMW8&quot;&gt;Minimize HTTP Requests! Requests 30 vs 1 (CSS Sprite) - YouTube</a></li>
</ul>
いかに、CSSスプライトが有用かは上記の動画を見てもらえれば分かるだろう。アイコン画像を30個をimg src=&quot;&quot;で読み込む場合と、30個のアイコンを全てひとつの画像にまとめたCSSスプライトで読み込む場合では（環境によっても変化はあるが）3倍の差が出た。<span style="color: #888888;">（3倍だと！？そいつはシャアだ。赤い彗星だ！）</span>
<ul>
    <li><a href="http://t32k.github.com/speed/rtt/SpriteImages.html"><strong>CSSスプライトに画像をまとめる | LPWS</strong></a></li>
</ul>
どのような画像をまとめたらよいのかは上記のリソースを参考にすればよい。 ただ、CSSスプライトにも問題がある。それは管理が非常に面倒な点だ。まずひとつひとつの画像をPhotoshopなどの画像編集ツールでまとめる必要あり、またその配置した画像の座標をbackground-positionに反映させる必要がある。
<ul>
    <li><a href="http://ja.spritegen.website-performance.org/"><strong>CSS Sprite Generator | Project Fondue</strong></a></li>
</ul>
CSS Sprite Generator のような便利なオンラインツールが存在するが、画像の変更があった場合、再度オンラインにアップロードしてコードをジェネレートする必要があったり、Retina対応を考えると自分で画像のサイズを半分にして計算しないといけない。 これでは、サービスリリース後などの度重なる改善・修正にマークアップが追いつかず不必要な画像までもそのままスプライト画像に残してしまっ た状態で無駄な転送量が発生してしまう。 実際に私がやっている案件でもグローバルナビゲーションや、カテゴリナビゲーションなどにスプライト画像を使用しHTTPリクエストを最小限に抑えている。リリース当時はきれいにまとまったスプライト画像も度重なるサービス改善で、スプライト画像のカテゴリアイコンがなくなったり、追加したりと何度も手入れをしなければならないことが発生し、その度に画像の作成・位置の再計算など非常に面倒な作業だった。<span style="color: #888888;">（李徴はとうとう発狂した！）</span>
<h2>Compassによる解決策</h2>
そこで目につけたのが、Compassフレームワークだ。Sassは開発当初から利用していたが、Compass自体は利用していなかった。Compassにはスプライトを簡単に利用できるAPIが備わっており、画像編集ソフトなど使わなくても画像を一つにまとめたり、それぞれのbackground-positionを算出してくれる。 使い方は非常にシンプルだ。スプライト画像にまとめたい個々の画像を任意のディレクトリに格納しておき、<em>@import</em>でそのディレクトリを指定し、<em>@include all-ディレクトリ名-sprites</em>で展開するだけだ。
<pre><code class="css">//　基本的なCompassスプライトの利用方法
@import &quot;my-icons/<em>.png&quot;;
@include all-my-icons-sprites;</code></pre>
上記のSCSSコードは下記のようにコンパイルされる。
<pre><code class="css">/</em> コンパイルされたCSS <em>/
.my-icons-sprite, .my-icons-fav, .my-icons-hist, .my-icons-my, .my-icons-new {
    background: url(&#39;/images/my-icons-sab4abd7554.png&#39;) no-repeat;
}
.my-icons-fav { background-position: 0 -68px; }
.my-icons-hist { background-position: 0 -136px; }
.my-icons-my { background-position: 0 -204px; }
.my-icons-new { background-position: 0 0; }</code></pre>
また上記のコードではmy-iconsディレクトリ以下にある個々の画像をひとつのスプライト画像にまとめてくれる。 <img class="aligncenter size-full wp-image-4465" title="compile" alt="" src="http://t32k.me/mol/file/2012/12/compile.png" width="900" height="300" />ただ、基本的な利用方法ではRetina対応や、自分のコードスタイルに合わず、独自でmixinを作成する必要があった。
<pre><code class="css">//　自分で定義したmixin
@mixin sprites($map, $map-item, $isCommon:false) {
     @if $isCommon {
          background-image: sprite-url($map);
          background-repeat: no-repeat;
          background-size: round(image-width(sprite-path($map)) / 2) round(image-height(sprite-path($map)) / 2);
     } @else {
          $pos-y: round(nth(sprite-position($map, $map-item), 2) / 2);
          width: round(image-width(sprite-file($map, $map-item)) / 2);
          height: round(image-height(sprite-file($map, $map-item)) / 2);
          background-position: 0 $pos-y;
     }
}</code></pre>
実際の使い方
<pre><code class="css">// mapを指定する
// $spacingの引数で個々の画像のマージンを指定できる
// この値がなければぴっちり縦に並ぶことになる
$map-tabs: sprite-map(&quot;/files/img/sprites/tabs/</em>.png&quot;,$spacing: 4px);</p>

<p>// 共通プロパティのextend
%tabs { @include sprites($map-tabs, common, true); }</p>

<p>// 共通プロパティ指定
i {
    @extend %tabs;
    position: relative;
    display: block;
    margin: 0 auto;
}</p>

<p>// 個別プロパティ指定
.tab-new i { @include sprites($map-tabs, new, false); }
.tab-fav i { @include sprites($map-tabs, fav, false); }
.tab-hist i { @include sprites($map-tabs, hist, false); }
.tab-mypage i { @include sprites($map-tabs, my, false); }
.tab-new.active i { @include sprites($map-tabs, new-on, false);}
.tab-fav.active i { @include sprites($map-tabs, fav-on, false); }
.tab-hist.active i { @include sprites($map-tabs, hist-on, false); }
.tab-mypage.active i {@include sprites($map-tabs, my-on, false); }</code></pre>
上記のコードでは、実際の画像ファイルの縦・横サイズを半分にして計算し、Retina対応をしている。等倍の画像ファイルも用意するのであればメディアクエリーを利用し分岐処理のコードを追加すれば良い。</p>

<p>このコードの肝というか、個人的に重要だと思っているのはこの<em>image-width(sprite-path($map)</em>部分である。これはスプライトした画像のパスを取り、そのwidthを返すものだ。通常のCSSやSassではこのようにファイルアクセスしそのファイルの情報を得るということはできなかった。故に、人力でbackground-positionを割り出すという面倒なことをやっていたのだ。</p>

<p>これより、非常に簡単にCSSスプライトの画像を管理できるようになった。なぜならスプライトしたい画像をまとめたディレクトリに画像を追加・削除・修正することで、Compassがそれを検知し自動的にスプライト画像を再生成し、background-positionの値をコードに反映してくれる。 これにより度重なるトライ・アンド・エラーに対して、時間的・モチベーション的にも余裕をもって改善のイテレーションを回せるようになった。
<ul>
    <li><a href="http://compass-style.org/reference/compass/helpers/sprites/">CSS Sprite Helpers for Compass | Compass Documentation</a></li>
    <li><a href="http://compass-style.org/help/tutorials/spriting/">Spriting with Compass | Compass Documentation</a></li>
</ul>
<a href="http://t32k.me/mol/file/2012/12/sprites.png"><img class="alignleft size-thumbnail wp-image-4464 fig" title="sprites" alt="" src="http://t32k.me/mol/file/2012/12/sprites-150x150.png" width="150" height="150" /></a>また気をつけなければならないことに、簡単にCSS Spriteできるようになったからといってすべての画像をスプライト画像にまとめることがないようにしたい。可能な限り、HTTPリクエストを減らすことは良いことだが、何事も限度がある。たとえばサイトで使うすべての画像をまとめてしまえば、そのどれか一つでも更新があれば再度リクエストしなければならない。これはキャッシュ保持できる期間が短くなってしまうことを意味し、結果的に応答性の悪いサイトになってしまう。ヘッダー画像のような大きな画像も含めば、初期ロード時にかなり待たなければならず体感速度的にも大きな影響がある。またそのような大きな画像と上記のような小さなアイコンが縦に並べば、空白の部分が多く生じる。ホワイトスペース部分はファイルサイズに影響しないが画像を表示するのにメモリを多く必要としてしまうため、これは非力なモバイルデバイス端末では無視できない事象である。</p>

<p>そのため、私は種類ごと、どのページでその画像が呼び出されるのかといった基準でスプライト画像を分けて管理している。タブバーで使われるものはtabsディレクトリ、矢印系のものはarrowsディレクトリに分けてなど、スプライト画像を作成している。
<h2>さらなる最適化のために<span style="color: #888888;">（ピリオドの向こうへ）</span></h2>
スプライト画像のPNGはCompassによって生成されるわけだが、これはRubyライブラリのchunky<em>pngを使用している。何ぶん画像を生成するので重たい処理だ。Cで書かれた拡張機能のoily</em>pngをインストールすると生成を早くすることができる。インストールは簡単だ。 <code>gem install oily_png</code> を打つだけで、あとはCompassが自動で認識してくれる。</p>

<p>またまた、Compassで生成された画像はもちろん最適化されていないので<a href="http://imageoptim.com/">imageOptim.app</a>などで最適化する必要がある。imageOptimをかけると、中には半分くらいファイルサイズを減量させることも可能で、この手間をかけるのとかけないのでは大きな違いだ。ただ、スプライトの画像を何度も追加・削除・修正するたびにimageOptim.appを起動し、ドラッグ・アンド・ドロップなんて真似事はめんどくさいの極みである。<span style="color: #888888;">（二重の極み！あっーーー！） </span></p>

<p>そこでGruntである。<a href="http://havelog.ayumusato.com/develop/javascript/e514-grunt_arrange_task.html"><strong>Gruntについては@ahomuブログを参照してもらえると良いだろう</strong></a>。gurnt deployといった具合にリリースする前にかますオリジナルタスク、またはwatchタスクに下記のような画像最適化タスクを入れておけば自動的に最適化してくれる。
<ul>
    <li><a href="https://github.com/heldr/grunt-img">grunt-img</a></li>
    <li><a href="https://github.com/sapegin/grunt-imgo">grunt-imgo</a></li>
    <li><a href="https://github.com/gruntjs/grunt-contrib-imagemin">grunt-contrib-imagemin</a></li>
</ul>
いかがだっただろうか。CSS Spriteという一見複雑な作業も1つ1つのタスクに分けて考えれば機械にできることなので、そういったものはすべて機械に任せるようにし人間はもっとクリエイティブなことに集中したほうが良い。幸いなことに、Sass/CompassやGruntのように機械と対話する環境は以前よりもずっと整備されてきているので利用しない手はない。そう、この波に乗るっきゃない(・ω&lt;)</p>

<p>この続きは・・・
<ul>
    <li><strong><a href="http://lp26.cssnite.jp/ ">CSS Nite LP, Disk 26「CSS Preprocessor Shootout」 </a>で！！</strong></li>
</ul></p>
</p>
            <div class="meta">
                Written By <address></a> &mdash;
                <time pubdate datetime="2012-02-December" title="December 02, 2012">December 02, 2012</time>
            </div>
        </div>
        <hr>
    </section>
    
    
  
    <section class="index">
        <!-- -->
        <div>
            <h2 class="title"><a href="/mol/log/join-enja-oss/" rel="prefetch">enja-ossに参加しよう！</a></h2>
            <p><p><a href="https://github.com/enja-oss"><img class="alignleft size-thumbnail wp-image-4485 fig" title="gravatar" src="http://t32k.me/mol/file/2012/12/gravatar-150x150.jpg" alt="" width="150" height="150" /></a>落ち葉が風に舞う季節となりました。我町の銀杏並木も美しい黄色に染まり初めました@t32k、いかがお過ごしか？俺？俺は元気だよ@t32kだ。もうびっくりなことに世間じゃもう12月っての？始まってるらしいじゃないか。え？来年から本気だすだって？馬鹿言っちゃいけねーよ。12月から本気出せよってことで、君も<strong><a href="https://github.com/enja-oss">enja-oss</a></strong>に参加しよう。</p>

<p>話しは簡単だ、君も<strong><a href="https://github.com/enja-oss">enja-oss</a></strong>に参加しよう。</p>

<p>クリスマス？関係ねぇ、君も<strong><a href="https://github.com/enja-oss">enja-oss</a></strong>に参加しよう。</p>

<p>年末年始？関係ねぇ、君も<strong><a href="https://github.com/enja-oss">enja-oss</a></strong>に参加しよう。</p>

<p>&lt;!--more--&gt;仕事でなにか困ったり、分からないことあったら君はどうする？ググるだろう？ググってお目当ての記事なりリソースが見つかるだろう？それって結局誰かが頑張って記録を残してくれたから俺たちはその恩恵に預っているわけだ。</p>

<p>そうやって恩恵に預かりまくって俺らはおまんまを食っている。そろそろ恩恵を預ける側に回ろうとまでは言わないが、なにかしら少なからず自分も世の中の役に立ちたいと思うわけですわな。そしたら、<strong><a href="https://github.com/enja-oss">enja-oss</a></strong>があったわけですな。これ参加しないわけにはいかないでしょ！ってことで参加した。</p>

<p>Webの最先端の情報は英語圏からやってくるわけでして、どーしても英語ってのはこの仕事上切っても切れない縁ですよ。なら、むしろこっちから絡まっていったらいんじゃね？ってことで<strong><a href="https://github.com/enja-oss">enja-oss</a></strong>ですよ。
<blockquote>en.ja OSSはOSSのドキュメントを日本語訳するグループです。
このグループは:
<ul>
    <li>OSSの日本語訳ドキュメントのレポジトリの集積</li>
    <li>OSSのドキュメント日本語訳のリクエストの集積</li>
</ul>
の2点にフォーカスし、オープンで、ソーシャルな翻訳を行っていきます。</blockquote>
まぁそうゆうわけで、有志の翻訳グループですｗ 僕も英語は得意じゃないけども、分かんなかったら<a href="https://twitter.com/cssradar">@cssradar</a>が監訳してくれるってことだし、英語の勉強がてら気軽に参加してみたらいいんじゃないかな。世の中には星の数ほどOSSはあるわけだし、その数だけ翻訳が待たれるドキュメントもあるわけでみんなで協力してやっつけるしかない！</p>

<p>ってことで、僕はCSSOのやつアップデートしました。
<ul>
    <li><strong><a href="https://github.com/enja-oss/CSSO">enja-oss/CSSO</a></strong></li>
</ul>
<span style="color: #888888;">(誰かSassのリファレンスを....)</span>
<table border="0" cellpadding="5">
<tbody>
<tr>
<td colspan="2"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4480085882/warikiru-22/" target="_top">英語の発想 (ちくま学芸文庫)</a></td>
</tr>
<tr>
<td valign="top"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4480085882/warikiru-22/" target="_top"><img src="http://ecx.images-amazon.com/images/I/51E0Z3ZZENL._SL160_.jpg" alt="英語の発想 (ちくま学芸文庫)" border="0" /></a></td>
<td valign="top"><span>安西 徹雄 </span>筑摩書房 2000-11
売り上げランキング : 29483<a href="http://www.amazon.co.jp/exec/obidos/ASIN/4480085882/warikiru-22/" target="_top">Amazonで詳しく見る</a><span> by <a href="http://www.goodpic.com/mt/aws/index.html">G-Tools</a></span></td>
</tr>
</tbody>
</table></p>
</p>
            <div class="meta">
                Written By <address></a> &mdash;
                <time pubdate datetime="2012-01-December" title="December 01, 2012">December 01, 2012</time>
            </div>
        </div>
        <hr>
    </section>
    
    
    <section class="pagination" style="text-align:center">
      
        
        <a href="/mol/page6" class="btn btn-outline">‹ Newer</a>
        
      
      
        <a href="/mol/page8" class="btn btn-outline">Older ›</a>
      
    </section>
</article>


<footer class="site-footer">
    <div class="container">
        &copy; 2013 
        
        <nav>
            <a href="http://t32k.me/">MOL</a> &middot;
            <a href="/mol/">Blog</a> &middot;
            <a href="https://github.com/t32k/maple">Maple</a> &middot; 
            <a href="https://github.com/t32k/t32k.github.io/blob/master/README.md">About</a>
        </nav>
        
        <nav class="social">
            
            <a href="https://twitter.com/t32k" title="Follow on Twitter" target="_blank"><i class="icon icon-twitter black"></i></a>
            
            
            <a href="http://facebook.com/t32k" title="Follow on Facebook" target="_blank"><i class="icon icon-facebook black"></i></a>
                
            <a href="/feed.xml" title="RSS Feed">
                <i class="icon icon-rss black"></i>
            </a>
        </nav>
        <!--p>Incorporated theme by <a href="https://sendtoinc.com">Inc</a></p-->
    </div>
</footer>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="/mol/assets/main.js"></script>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=253595308025739";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>



</body>
</html>