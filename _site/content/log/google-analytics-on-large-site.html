<p>ありがたくも、<a href="http://lp19.cssnite.jp/">CSS Nite LP, Disk 19「アクセス解析」</a>で話した「大規模サイトにおけるGoogleアナリティクス導入から成果まで〜Webデザイナーがアクセス解析に携わってみて〜」が 、<a href="http://cssnite.jp/archives/best-session2011.html">CSS Niteベストセッション2011</a> のベスト20に選ばれたので、文字に起こしてみるの巻。</p>

<object id="__sse10814106" width="500" height="426" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="allowFullScreen" value="true" /><param name="allowScriptAccess" value="always" /><param name="wmode" value="transparent" /><param name="src" value="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=lp19ishimoto-120105025806-phpapp02&amp;stripped_title=lp19-ishimoto&amp;userName=t32k" /><param name="allowscriptaccess" value="always" /><param name="allowfullscreen" value="true" /><embed id="__sse10814106" width="500" height="426" type="application/x-shockwave-flash" src="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=lp19ishimoto-120105025806-phpapp02&amp;stripped_title=lp19-ishimoto&amp;userName=t32k" allowfullscreen="true" allowscriptaccess="always" wmode="transparent" /> </object>

<p>DMM.com Laboの石本です。よろしくお願いします。今日は大規模サイトでのGoogleアナリティクス運用について話します。そんなに難しいことではないので、リラックスして読んでもらえれば幸いです。</p>
<h2>アジェンダ</h2>
<p>本日の流れはこんな感じでやっていきます。</p>
<ol>
	<li>自己紹介</li>
	<li>アクセス解析への動機</li>
	<li>プロファイルの適正化</li>
	<li>コンバージョン設定から改善施策へ</li>
	<li>まとめと今後の課題</li>
</ol>
<div><!--more--></div>
<h2>自己紹介</h2>
<p>では、やっていきましょう。まずは自己紹介させてください。Twitter IDは<a href="https://twitter.com/#!/t32k">@t32k</a>でWebデザイナーをしています。</p>

<p>2011/9/26ですね。共著ですが「<a href="http://www.amazon.co.jp/gp/product/4844362232/ref=as_li_ss_tl?ie=UTF8&amp;tag=warikiru-22&amp;linkCode=as2&amp;camp=247&amp;creative=7399&amp;creativeASIN=4844362232">スマートフォンサイト制作の教科書</a>」という本を書きました。初めてスマートフォンサイトを作る方、入門者向けですので、今後のスマートフォンサイトの概要を知る上でもマーケッターさんの方も買ってもらってもいいんじゃないかなと思います。オールカラーで読みやすいです。</p>

<p>あとは趣味でiPhoneアプリを作ったりしています。左が<a href="http://itunes.apple.com/app/nyars/id433610083?mt=8">Nyars</a>というアプリで、なんてことのないただの猫耳をオーバーレイして写真が取れるというものです。右が<a href="http://itunes.apple.com/app/tissa/id464594372?mt=8">tissa</a>というアプリで、なんてことのないただのタイマーアプリで350円で売ってます。</p>
<h2>アクセス解析への動機</h2>
<p>と言うわけで、本題に入ってきます。見た感じ完全に制作サイドのWebデザイナーがなにゆえアクセス解析に興味をもったのかと話していきます。</p>

<p>まず私の毎日仕事しているフィールドです、みなさんもご存知かと思いますがDVDレンタルなどで有名な<a href="http://www.dmm.com/">DMM.com</a>です。レンタル以外にも動画配信や、通販事業なども行っています。そこで私も含めたWebデザイナーこのような、商品の特集ページであったりヘルプページ、バナーなど制作しています。
&lt;p style="text-align: center;"&gt;<img class="aligncenter size-full wp-image-3895" title="DEM" src="/static/blog/2012/01/19.010-002.png" alt="" width="500" height="375" />&lt;/p&gt;
当たり前ですが、Webサイトはデザイナーだけでは作れません。サイトをしっかりと運用していくにはデザイナー以外にもエンジニアの力も必要ですし、マーケッターさんの力も不可欠です。しかし、お互いが協力していくには相手の言葉を知らなすぎるような気がします。例えば、マーケッターさんがデザイナーにCPCがどーたらCPAがどーたらといってもピンとこないでしょうし、反対にデザイナーがマーケッターさんにUXDやIAがどーたらと言っても理解してもらえないと思います。まぁ大げさな例ですが、多かれ少なかれ似たようなケースがそこかしこで起きているでしょう。私はデザイナー5年目ですが、この人らは同じ日本語を喋りますが、違う言語の中で生きてると理解しています。
&lt;p style="text-align: center;"&gt;<a href="http://ja.wikipedia.org/wiki/%E3%83%A8%E3%83%8F%E3%83%B3%E3%83%BB%E3%83%B4%E3%82%A9%E3%83%AB%E3%83%95%E3%82%AC%E3%83%B3%E3%82%B0%E3%83%BB%E3%83%95%E3%82%A9%E3%83%B3%E3%83%BB%E3%82%B2%E3%83%BC%E3%83%86"><img class="aligncenter fig" title="Johann Wolfgang von Goethe" src="/static/blog/2012/01/19.012-001.png" alt="" width="500" height="375" /></a>&lt;/p&gt;
これは私の好き言葉でもありますが、外国語を知らないもの者は母国語を知らないとゲーテは言っています。相手の言っていることは理解したいですし、そうすることで自分の言語：デザインに関しても理解が深まれば好都合です。そうゆうことで自分に対してはこのようなスタンスで臨めば良いかもしれませんが、これを他者に求めるのは酷なこともかもしれません。ましてや、クライアントや上司の方に、あんたデザインなんでわかってないんや！などとは言えません。</p>

<p>そこで皆が共通に理解できるモノが必要となってきます。はい、数字ですね。3は3でありそれ以上でもそれ以下でもありません。3が4になれば増えたということ、2になれば減ったということは、どんな職種の人だろうと同じ理解を得られるわけです。そして、Webサイトの数字といえばアクセス解析であり、それが切実に必要だと感じています。</p>
<h2>プロファイルの適正化</h2>
<p>というわけで、デザイナーですけどアクセス解析をやってこうと考えたわけですが、そう簡単にうまくはいきません。プロファイル（Google アナリティクスのレポート）の閲覧の段階でまずつまづきましたという話をしていきます。</p>

<p>その前に、DMM.comのサイト規模を紹介したいと思います。DMM.comはクレジット登録しているなどすぐに課金可能な会員が362万人。月間ユニークユーザーが1900万人の8.6億ページビュー。Google アナリティクスのプロファイル数は83個、Google アナリティクスにアクセスできるユーザー数は119人ほどです。</p>

<p>正直このレベルになってくると、データの嵐の海を彷徨うのと同じようなもので、ただトラッキングコードを入れていればOKという話ではありませんでした。そこで最初にとりかかった作業がプロファイルの適正化です。誰が見てもおかしくない数値、見たい情報を見ることができるプロファイルにしなければなりません。</p>

<p>Google アナリティクスを大規模サイトで使用する上で問題になってくるのが50,000URL問題です。ちょうど<a href="http://code.google.com/intl/ja/apis/analytics/docs/index.html">Googleアナリティクス開発者向けドキュメント</a>に該当の問題ついて述べられてるところがあります。</p>
<blockquote><strong>1日あたり、50,000 を超える一意の URL または仮想ページをトラッキングしていますか。</strong>
<span style="font-size: x-small;">Google Analytics では毎日、ウェブサイトから送信されてきたすべてのデータと、ページビューで並べ替えられた上位 50,000 ページ上のレポートを収集します。残りのページは、コンテンツ レポートの「(その他)という別のセクションにまとめられます。トラフィックの少ないページビューの詳しいレポート情報を表示するには、トラフィックの多いすべてのページビューを除外するフィルターを使用した新しいプロファイルを設定してください。これにより、上位 50,0000 の URL に残りのページを効率的に含められるようになります。</span></blockquote>
<p>これはどうゆうことかと言いますと、Google アナリティクスで1日で処理できるURL数はページビューの上位5万までなんですね。5万以上になると、それからは<em><strong>（other）</strong></em>（その他）という項目にまとめられてしまいます。これがどうゆう悪さをしますのかと言いますと、実際はページビューがカウントされているはずのページ、GIFリクエストも発生しているのにもかかわらず5万URLに入らなかったため、プロファイルで確認できないページが出てきます。全体のPVには入ってるんですけども、個別のURLレポートでは確認できないということです。</p>

<p><img class="aligncenter size-full wp-image-3902" title="other" src="/static/blog/2012/01/19.022-002.png" alt="" width="500" height="375" /></p>

<p>全体のページビューを見ても、この青色の部分が（other）その他で全体の4割も占めています。このくらいになってくると、ページを製作して公開しても測定できないってことがよくありました。</p>

<p>とりあえず、この５万URLの内訳はどうゆうものなのか調べてみます。このような商品の詳細ページというのが多くあります。これは通販のタイガー＆バニーのDVDですが動画配信でも同じ作品がありますし、この作品がレンタル出来ればレンタルフロアでも似たような詳細ページができあがります。つまりDMM.conでは1つの作品に対して複数のURLを生成してしまう可能性が高いです。こう言ったコンテンツは数百万単位でありますからこの時点でURLは5万におさまらないということが理解できます。</p>

<p>またこのような商品リスト・一覧ページというのがあります。これは価格の高い順番、低い順番などで並べ替えができます。つまりURLのパラメータで処理することになるので、それだけURLが増えます。また1つのリストページに掲載できる商品も限られますので、1ページ2ページとページ数が増えていきます。</p>

<p>このように、個々のURLを見ていくと当面、分析・解析しないようなURLが非常に多くあることが理解できます。私たちは解析を始めたばかりなのでこのような瑣末なとこに注力するのではなくもっと全体を見るほうが合理的でしょう。</p>

<p>ということで、ハイレベルサイトマップという考えが重要になってきます。こんなのです。</p>

<p>ハイレベルサイトマップ（ハイレベルサイトストラクチャ）というのは、サイトの概要・導線を理解するために必要なものです。URLごとではなくて、サイトの役割ごとでページをまとめて理解しようというものです。</p>

<p><img class="aligncenter size-full wp-image-3896" title="Hi_level" src="/static/blog/2012/01/19.027-001.png" alt="" width="500" height="375" /></p>

<p>これをDMM.comにあてはめて考えてみると、このようなハイレベルサイトマップができあがりました。トップページがあって商品一覧ページと詳細ページを行き気してる感じですかね。このレベルの情報の粒度で理解出来ればいいので、Google アナリティクスのプロファイルもこれが確認出来ればいいわけです。つまり、私が欲しいのはハイレベルサイトマップ用のプロファイルが欲しいということです。</p>

<p>ハイレベル用のプロファイルを作成するには、同じ種類のページのURLをまとめる必要があります。そのためには、プロファイルに対してカスタム詳細フィルタをかけてあげます。</p>

<p>もうちょっとわかりやすくしたのが次のスライドです。URLを書き換えるためにはその対象となるURLを抜き出して再構成する必要があります。この場合、detailもしくはlistを含むものを引き出してきます。それをdetailもしくはlist以下のパラメータは全部削除して上書きしています。実際のURLに当てはめるとこうなります。はいこれで、だいぶURL数が少なすることができました。</p>

<p>おまけですが、正規表現ってのはやっぱり意味がわからないですよね。いきなり自信のない正規表現のフィルタをデータにかけるのはかなり危険なことなので練習する必要あります。Google アナリティクスであればコンテンツのアドバンスフィルタを有効にして正規表現を選択すれば実際のサイトURLで練習ができます。またローカルで確認したければWindowsなら<a href="http://weitz.de/regex-coach/">regex Coach</a>やMacなら<a href="http://atastypixel.com/blog/reginald-regex-explorer/">Reginald</a>がおすすめです。では、さきほどのフィルタ処理したあとのプロファイルはどーなっているのでしょうか。</p>

<p>デフォルト状態だとこのように4割が(other)でしたが、フィルタ処理後のプロファイルには(other)は綺麗サッパリなくなりました。代わって、フロアごとのdetailページやlistページが計測されています。まさしくハイレベルサイトマップのためのプロファイルです。</p>

<p>冒頭に見せました0PVのページもdetailとlistをまとめてゆとりがでたのか、ちゃんと計測されるようになりました。めでたしめでたし。</p>

<p>これでデータの嵐だった海が、人が理解できる・役立つInformation・情報の湖となりました。今度はこの湖をうまくこぐ必要がでてきます。</p>
<h2>コンバージョン設定から改善施策へ</h2>
<p>次は実際にGoogle アナリティクスを使って改善施策をしてみます。ここまでサラッと言いましたが、実際はプロファイルの適正化に1年くらいかかかってます（当時はGoogle アナリティクスの情報も少なかったですし、開発者ドキュメントも翻訳されていない状態でした&gt;&lt;）。そろそろ、結果ださないと社内に居場所ないなーって空気になってきたので本気で成果を出さなければなりません。</p>

<p>ということで今一度、成果・ゴールとは何かとゆうのを確認してみましょう。DMM.comの場合は簡単ですね。Eコマースサイトなので お金を稼ぐことです。 商品をいっぱい売ることが目標です。これ自体は至極簡単な話です。</p>

<p>そのためには商品が売れてるかどうかを確認する必要性があります。はい、コンバージョン設定を忘れておりました。コンバージョン設定のないGoogle アナリティクスは魅力半減といってもいいほど、これがないと意味がありません。当たり前ですよね、売上を上げるために解析ツールを使ってるのにそのツールで成果を確認できなければ、何のために使ってるのか意味がわかりません。</p>

<p>コンバージョンを設定するにはコンバージョンURLを指定するだけです。通常であればサンキューページといった購入完了ページをコンバージョンURLとして指定すればいいんですけど、DMM.comにはなかったんです。</p>

<p>各事業部によってページ遷移に差異があります。今回のケースは動画配信フロアのケースですが、購入完了ボタンを押すと、そのままユーザーのマイライブラリに飛ばされます。このマイライブラリというページはユーザーの買った動画が視聴できるページです。このページをコンバージョンURLにすると、買った動画を見るためにアクセスする度にコンバージョンが発生してしいまいます。</p>

<p>無駄にサンキューページを1枚挟むのもどうなのかと思い、今回はパラメータ処理で解決しました。バスケットに入れる、購入確認、マイライブラリと購入フローを通して遷移して来た場合のみ、URLにパラメータを付けることにしました。こうすることで普通にマイライブラリに遷移したときとは、URLで区別できるようにしたのです。はい、そうゆうわけで、めでたくコンバージョン推移を確認することができました。</p>

<p>はい、次に改善にあたっての仮説と言うほど大それた事ではないのですが、ちょっと気になる点があります。</p>

<p>先程のコンバージョンファネルを見てみましょう。問題となるのはここです。購入確認から購入完了となっているユーザーが93%となっています。これが多いのか少ないのか、現時点ではよく分かりませんが、あとはボタンを押すだけなのに離脱している人７％いるってのはどうなのかなと感じました。個人的には98%くらいあってもいいんじゃないかと。とどのつまり、取りこぼし多くない？ってことです。</p>

<p><img class="aligncenter size-full wp-image-3897" title="前" src="/static/blog/2012/01/19.049-001.png" alt="" width="500" height="375" /></p>

<p>では、該当のページである購入確認がどのようなページなのか見てみましょう。これが改善前の購入確認ページです。該当の部分だけ表示しています。パッと見ごちゃごちゃして、どこを押せば購入完了となるのか瞬時に判断できません。一番の問題はここですね。購入完了と訂正するボタンがヴィジュアルのインパクトが同じであるのは頂けません。これを実際の生活で例えれば、例えばコンビニエンスストアで商品をレジまで持って行って、そこで店員がやめるの？買うの？って聞いてるようなものです。そんなのありえないですよね。</p>

<p>まだ改善できそうなところはありそうですね。はい、この長ったらしい注意書きですね。Windows7のときはどうやら、利用規約がどーやらと。これも同じように考えればくどいです。またこのような注意書きはこのページ以外にも書かれていることなので、この場面であえて表記する必要はないと判断しました。</p>

<p><img class="aligncenter size-full wp-image-3898" title="後" src="/static/blog/2012/01/19.050-005.png" alt="" width="500" height="375" /></p>

<p>改善後のページでは、購入するボタンを金色にすることで一番目立たせています。また注意書き、規約の同意文を一行だけにしてすっきりさせました。訂正するボタンがなくなったので、「変更する」テキストリンクを設置しました。これで、迷いはなくなるのではないかと考えます。</p>

<p>結果はどーなったのでしょうか。</p>

<p>施策前後8週間の購入確認から購入完了の遷移率を調べてみました。こんな感じです。赤が改善後、青が改善前を現してます。平均して1.52%上昇しました。一応<a href="http://t32k.me/mol/log/statistical-significance/">有意差検定</a>もしてるので、たまたま上がったとは考えにくいです。</p>

<p><img class="aligncenter size-full wp-image-3900" title="1000" src="/static/blog/2012/01/19.053-001.png" alt="" width="500" height="375" /></p>

<p>これがどれだけの売上へのインパクトだったかと、1回当たりの平均購入金額 * 1ヶ月当たりの1%平均ＣＶ数 * 改善率でおおよその金額が分かります。はい、1000万ほどの売上アップさせることができました。少なくとも翌月も改善の効果が見受けられたので2000万は確実です。工数もエンジニアとデザイナー2人が実質、3営業日くらいでやったのでコストパフォーマンスの高い仕事ができたのではないかと思っています。</p>
<h2>まとめと今後の課題</h2>
<p>URLを設計するのはエンジニアなので、そうゆうことを気にしてもらえるだけでも正規表現とかも簡単なもので済みますし、デベロッパーを味方に付けておいて損はないかと思います。じゃないと自分で勉強してやらないとダメでしんどいです＞＜</p>

<p>あと、お金じゃなくてもいいですけど、コンバージョンに近いところから手をつけ始めるのは、施策がダイレクトに成果に直結するので 分かりやすくて良いかと思います。やっぱり、どうしてもトップページなどの華やかなところから改修しがちですが、改修した結果それがどれだけコンバージョンアップに寄与できたの？ってことを考えるとちょっとあやふやになってしまいがちです。今回の購入フローページのように、目立たないところですが結果を出せたことで、同様のページにも目を向けさせることができたのは良いことだと思っています。</p>

<p>最後に、Google Analytics PremiumですがGoogle アナリティクスのエンタープライズ用のサービスです。まだ、日本ではサービス開始されてはいませんが、10億コールで約1200万円支払うで、今回紹介した5万URLの問題も100万まで拡張できたり、手厚いやヘルプサポートが受けられるみたいです。これがあれば、こんなにも苦労しなかったのですけどね。。。</p>

<p>また今後の課題としては、解析・改善までもってけるような教育や仕組みを作りたいです。</p>

<p>Google アナリティクスや他の解析ツールでも言えることですが、ページ間の流れを理解するのは便利ですが、1つのページの中の要素がどのようにユーザーに受け止めらているのかってのを理解するにはちょっと役不足なので、Google アナリティクスを補完するという意味でVOYAGE GROUPナビさんもおすすめの<a href="http://www.clicktale.com/">ClickTale</a>を導入中です。
&lt;p style="text-align: center;"&gt;<a href="http://www.flickr.com/photos/avinashkaushik/4056840164/"><img class="fig aligncenter" title="The McDonald triplets!!" src="/static/blog/2012/01/19.057-001.png" alt="" width="500" height="375" /></a>&lt;/p&gt;
ということで、まだアクセス解析の取り組みはスタートラインに立ったという現状なので暖かく見守って頂ければ幸いです。</p>
<h2>リソース</h2>
<ul>
	<li><a href="http://t32k.me/mol/log/google-analytics-other-entry/">Google Analyticsの(other)とはなんぞや？ | MOL </a></li>
	<li><a href="http://t32k.me/mol/log/statistical-significance/">施策前後のCV率に有意差はあるのか？ | MOL </a></li>
	<li><a href="http://code.google.com/intl/ja/apis/analytics/docs/">Google アナリティクス開発者向けドキュメント - Google Code</a></li>
	<li><a href="http://higashizm.sakura.ne.jp/reg/http://higashizm.sakura.ne.jp/reg/%0D">はじめての正規表現</a></li>
	<li><a href="http://an-k.jp/blog/archives/2289">ハイレベルサイトマップの作り方 | dIG iT</a></li>
	<li><a href="http://www.cms-ia.info/news/google-analytics-premium-launched/">Google Analytics Premiumについてのまとめ :: 実践CMS*IA</a></li>
	<li><a href="http://uio.ecnavi.co.jp/category/%25E3%2583%2584%25E3%2583%25BC%25E3%2583%25AB/clicktale/">ClickTale « VOYAGE GROUP UIO戦略室ブログ </a></li>
</ul>
